{% extends "base.html" %}
{% block title %} Hypervisors {% endblock %}
{% block style %}

{% endblock %}
{% block content %}

<div class="card card-flush shadow-sm pt-6">
    <div class="card-header">
        <h1 class="card-title fs-1 text-gray-700">
            <svg style="margin-right: .5rem;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-hdd-stack-fill" viewBox="0 0 16 16">
                <path d="M2 9a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H2zm.5 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm2 0a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zM2 2a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2zm.5 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm2 0a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1z"/>
            </svg>
              Hypervisors
        </h1>
        <div class="card-toolbar">
            <a href="{{ url_for('viewables.createAhypervisors') }}">
                <button type="button" class="btn btn-sm btn-danger p-4 fs-4">
                    Connect New Hypervisor
                </button>
            </a>
        </div>
    </div>
    <div class="card-body py-5">
        <div class="d-flex justify-content-around bg-dark py-4 rounded">
            <!--  -->
            <div class=" w-25">
                <div class="d-flex justify-content-center">
                    <h1 class="text-white py-4">
                        <svg style="margin-right: .5rem;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-hdd-stack-fill" viewBox="0 0 16 16">
                            <path d="M2 9a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2H2zm.5 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm2 0a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zM2 2a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2zm.5 3a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm2 0a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1z"/>
                        </svg>
                          Hypervisors
                    </h1>
                </div>
                <div class="card-body py-5">   
                    <div class="d-flex justify-content-center">
                        <div class="bg-white w-50 d-flex justify-content-center rounded p-2">
                            <h1>{{hyLen}}</h1>
                        </div>
                    </div>
                </div>
            </div>
            <!--  -->

            <!--  -->
            <div class=" w-25">
                <div class="d-flex justify-content-center">
                    <h1 class="text-white py-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-puzzle-fill" viewBox="0 0 16 16">
                            <path d="M3.112 3.645A1.5 1.5 0 0 1 4.605 2H7a.5.5 0 0 1 .5.5v.382c0 .696-.497 1.182-.872 1.469a.459.459 0 0 0-.115.118.113.113 0 0 0-.012.025L6.5 4.5v.003l.003.01c.004.01.014.028.036.053a.86.86 0 0 0 .27.194C7.09 4.9 7.51 5 8 5c.492 0 .912-.1 1.19-.24a.86.86 0 0 0 .271-.194.213.213 0 0 0 .036-.054l.003-.01v-.008a.112.112 0 0 0-.012-.025.459.459 0 0 0-.115-.118c-.375-.287-.872-.773-.872-1.469V2.5A.5.5 0 0 1 9 2h2.395a1.5 1.5 0 0 1 1.493 1.645L12.645 6.5h.237c.195 0 .42-.147.675-.48.21-.274.528-.52.943-.52.568 0 .947.447 1.154.862C15.877 6.807 16 7.387 16 8s-.123 1.193-.346 1.638c-.207.415-.586.862-1.154.862-.415 0-.733-.246-.943-.52-.255-.333-.48-.48-.675-.48h-.237l.243 2.855A1.5 1.5 0 0 1 11.395 14H9a.5.5 0 0 1-.5-.5v-.382c0-.696.497-1.182.872-1.469a.459.459 0 0 0 .115-.118.113.113 0 0 0 .012-.025L9.5 11.5v-.003l-.003-.01a.214.214 0 0 0-.036-.053.859.859 0 0 0-.27-.194C8.91 11.1 8.49 11 8 11c-.491 0-.912.1-1.19.24a.859.859 0 0 0-.271.194.214.214 0 0 0-.036.054l-.003.01v.002l.001.006a.113.113 0 0 0 .012.025c.016.027.05.068.115.118.375.287.872.773.872 1.469v.382a.5.5 0 0 1-.5.5H4.605a1.5 1.5 0 0 1-1.493-1.645L3.356 9.5h-.238c-.195 0-.42.147-.675.48-.21.274-.528.52-.943.52-.568 0-.947-.447-1.154-.862C.123 9.193 0 8.613 0 8s.123-1.193.346-1.638C.553 5.947.932 5.5 1.5 5.5c.415 0 .733.246.943.52.255.333.48.48.675.48h.238l-.244-2.855z"/>
                        </svg>
                          Memory
                    </h1>
                </div>
                <div class="card-body py-5">   
                    <div class="d-flex justify-content-center">
                        <div class="bg-white w-50 d-flex justify-content-center rounded p-2">
                            <h1>{{totalMem}} GB</h1>
                        </div>
                    </div>
                </div>
            </div>
            <!--  -->

            <div class=" w-25">
                <div class="d-flex justify-content-center">
                    <h1 class="text-white py-4">
                        <i class="fa fa-database fa-sm" aria-hidden="true"></i>
                          Storage
                    </h1>
                </div>
                <div class="card-body py-5">   
                    <div class="d-flex justify-content-center">
                        <div class="bg-white w-50 d-flex justify-content-center rounded p-2">
                            <h1>{{totalStorage}} Gb</h1>
                        </div>
                    </div>
                </div>
            </div> 
        </div>

    </div>











    <div class="card-footer">

        <div class="d-flex">
            <div class="bg-dark p-4 rounded mx-2">
                <svg style="color:white" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
            </div>
            <input type="text" id="searchBar" class="form-control" placeholder="Search"/>
        </div>
        
        <table id="kt_datatable_example_1" class="table table-row-bordered gy-5">
            <thead>
                <tr class="fw-bold fs-6 text-muted">
                    <th>Hypervisor</th>
                    <th>Connection</th>
                    <!-- <th>Used IP's</th> -->
                    <th>Mechines</th>
                    <!-- <th>Income</th> -->
                </tr>
            </thead>
            <tbody id="table">
                {% for hypervisor in hypervisors %}
                <tr>
                    <td>
                        {% if hypervisor.status=="Connected" %}
                        <a href="{{ url_for('viewables.hypervisorDashboard',hypervisor=hypervisor.hostname) }}"> {{hypervisor.hostname}}</a>
                        {% else %}
                        <a style="color: tomato;"> {{hypervisor.hostname}}</a>
                        {% endif %}
                    </td>
                    <td>
                        {% if hypervisor.status=="Connected" %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plug-fill" viewBox="0 0 16 16">
                            <path d="M6 0a.5.5 0 0 1 .5.5V3h3V.5a.5.5 0 0 1 1 0V3h1a.5.5 0 0 1 .5.5v3A3.5 3.5 0 0 1 8.5 10c-.002.434-.01.845-.04 1.22-.041.514-.126 1.003-.317 1.424a2.083 2.083 0 0 1-.97 1.028C6.725 13.9 6.169 14 5.5 14c-.998 0-1.61.33-1.974.718A1.922 1.922 0 0 0 3 16H2c0-.616.232-1.367.797-1.968C3.374 13.42 4.261 13 5.5 13c.581 0 .962-.088 1.218-.219.241-.123.4-.3.514-.55.121-.266.193-.621.23-1.09.027-.34.035-.718.037-1.141A3.5 3.5 0 0 1 4 6.5v-3a.5.5 0 0 1 .5-.5h1V.5A.5.5 0 0 1 6 0z"/>
                        </svg>
                        <span class="text-success">{{hypervisor.status}}</span>
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plug-fill" viewBox="0 0 16 16">
                            <path d="M6 0a.5.5 0 0 1 .5.5V3h3V.5a.5.5 0 0 1 1 0V3h1a.5.5 0 0 1 .5.5v3A3.5 3.5 0 0 1 8.5 10c-.002.434-.01.845-.04 1.22-.041.514-.126 1.003-.317 1.424a2.083 2.083 0 0 1-.97 1.028C6.725 13.9 6.169 14 5.5 14c-.998 0-1.61.33-1.974.718A1.922 1.922 0 0 0 3 16H2c0-.616.232-1.367.797-1.968C3.374 13.42 4.261 13 5.5 13c.581 0 .962-.088 1.218-.219.241-.123.4-.3.514-.55.121-.266.193-.621.23-1.09.027-.34.035-.718.037-1.141A3.5 3.5 0 0 1 4 6.5v-3a.5.5 0 0 1 .5-.5h1V.5A.5.5 0 0 1 6 0z"/>
                        </svg>
                        <span style="color: tomato;">{{hypervisor.status}}</span>
                        {% endif %}
                    </td>
                    <!-- <td class="px-8">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                        </svg>
                    </td> -->
                    <td class="px-8">{{hypervisor.mechines|length}}</td>
                </tr>
                {% endfor %}
                
            </tbody>
        </table>

    </div>
</div>

{% endblock %}
{% block script %}
<script>
    $(document).ready(function(){
        $("#searchBar").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#table tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });
</script>
{% endblock %}